(desc:(eng:"",rus:""),cam:(look_at:(0,0,0),alpha:-1.0999868358385498,beta:0.7075108203690927,r:3.5,offset_after_material:0.000025),uniforms:(ids:(available:[],max:37),storage:{(0):Named(Float((min:Some(0),max:None,value:4)),"room_size_x"),(1):Named(Float((min:Some(0),max:None,value:4)),"room_size_y"),(2):Named(Float((min:Some(0),max:None,value:4)),"room_size_z"),(3):Inline(Formula(("-room_size_x"))),(4):Inline(Formula(("-room_size_y"))),(5):Inline(Formula(("-room_size_z"))),(6):Named(Bool(true),"portal_teleport_light"),(7):Named(Formula(("progress")),"portal_black_color_progress"),(8):Named(Bool(false),"portal_mirror"),(9):Named(Float((min:Some(0),max:None,value:0.13)),"portal_border_size"),(10):Named(Float((min:Some(0),max:None,value:2)),"portal_ellipse_a"),(11):Named(Float((min:Some(0),max:None,value:1)),"portal_ellipse_b"),(12):Named(Formula(("const_max_side_border * (1.0 - progress)")),"portal_side_border_size"),(13):Named(Float((min:Some(0),max:None,value:0)),"triangle_size"),(14):Named(Float((min:Some(-0.6),max:Some(0.6),value:-0.5)),"triangle_x"),(15):Named(Float((min:Some(-1.6),max:Some(1.6),value:0)),"triangle_y"),(16):Named(Float((min:Some(-1),max:Some(1),value:-0.55)),"triangle_z"),(17):Named(Float((min:None,max:None,value:0)),"portal_offset"),(18):Named(Angle(3.141592653589793),"portal_rotate_angle"),(19):Inline(Formula(("progress * 0.2"))),(20):Named(Progress(1),"progress"),(21):Inline(Formula(("progress * const_max_offset + 0.01"))),(22):Inline(Progress(0)),(23):Inline(Progress(0)),(24):Inline(Formula(("1.0 - progress"))),(25):Inline(Progress(0)),(26):Inline(Progress(0)),(27):Inline(Formula(("-pi() * progress"))),(28):Inline(Progress(0)),(29):Inline(Formula(("const_max_offset + 0.01"))),(30):Inline(Formula(("const_max_offset * (1.0 - progress)"))),(31):Inline(Progress(0)),(32):Inline(Progress(0)),(33):Inline(Formula(("const_max_side_border * (1.0 - progress)"))),(34):Inline(Formula(("progress"))),(35):Named(Float((min:None,max:None,value:0.2)),"const_max_side_border"),(36):Named(Float((min:None,max:None,value:1.12)),"const_max_offset")},storage_order:[(0),(1),(2),(10),(11),(6),(8),(7),(9),(12),(17),(18),(13),(14),(15),(16),(20),(35),(36)]),matrices:(ids:(available:[(18)],max:20),storage:{(0):Named(Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),"room_origin"),(1):Inline(Mul(to:Some(((2))),what:Some(((0))))),(2):Inline(Parametrized(offset:(x:Yes(Some(((0)))),y:No(0),z:No(0)),rotate:(x:No(0),y:No(1.5707963267948966),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(3):Inline(Mul(to:Some(((4))),what:Some(((0))))),(4):Inline(Parametrized(offset:(x:Yes(Some(((3)))),y:No(0),z:No(0)),rotate:(x:No(0),y:No(1.5707963267948966),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(5):Inline(Mul(to:Some(((6))),what:Some(((0))))),(6):Inline(Parametrized(offset:(x:No(0),y:Yes(Some(((1)))),z:No(0)),rotate:(x:No(1.5707963267948966),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(7):Inline(Mul(to:Some(((8))),what:Some(((0))))),(8):Inline(Parametrized(offset:(x:No(0),y:Yes(Some(((4)))),z:No(0)),rotate:(x:No(1.5707963267948966),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(9):Inline(Mul(to:Some(((10))),what:Some(((0))))),(10):Inline(Parametrized(offset:(x:No(0),y:No(0),z:Yes(Some(((2))))),rotate:(x:No(0),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(11):Inline(Mul(to:Some(((12))),what:Some(((0))))),(12):Inline(Parametrized(offset:(x:No(0),y:No(0),z:Yes(Some(((5))))),rotate:(x:No(0),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(13):Named(Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),"monoportal_origin"),(14):Named(Mul(to:Some(((19))),what:Some(((13)))),"monoportal_a"),(15):Named(Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),"monoportal_b"),(16):Named(Parametrized(offset:(x:Yes(Some(((14)))),y:Yes(Some(((15)))),z:Yes(Some(((16))))),rotate:(x:No(1.5707963267948966),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1)),"triangle"),(17):Named(Teleport(first_portal:Some(((14))),second_portal:Some(((15))),what:Some(((16)))),"triangle_teleported"),(19):Inline(Parametrized(offset:(x:No(0),y:No(0),z:Yes(Some(((17))))),rotate:(x:No(0),y:Yes(Some(((18)))),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1)))},storage_order:[(0),(13),(14),(15),(16),(17)]),objects:(ids:(available:[],max:9),storage:{(0):Named(Flat(kind:Simple(Some(((1)))),is_inside:(("return is_inside_square(x, y, room_size_z_u, room_size_y_u, room_yellow_M);"))),"room_x+"),(1):Named(Flat(kind:Simple(Some(((3)))),is_inside:(("return is_inside_square(x, y, room_size_z_u, room_size_y_u, room_red_M);"))),"room_x-"),(2):Named(Flat(kind:Simple(Some(((5)))),is_inside:(("return is_inside_square(x, y, room_size_x_u, room_size_z_u, room_black_M);"))),"room_y+"),(3):Named(Flat(kind:Simple(Some(((7)))),is_inside:(("return is_inside_square(x, y, room_size_x_u, room_size_z_u, room_gray_M);"))),"room_y-"),(4):Named(Flat(kind:Simple(Some(((9)))),is_inside:(("return is_inside_square(x, y, room_size_x_u, room_size_y_u, room_blue_M);"))),"room_z+"),(5):Named(Flat(kind:Simple(Some(((11)))),is_inside:(("return is_inside_square(x, y, room_size_x_u, room_size_y_u, room_green_M);"))),"room_z-"),(6):Named(Flat(kind:Portal(Some(((14))),Some(((15)))),is_inside:(("int back_material = portal_orange_M;\nif (first) { back_material = portal_blue_M; }\n\nint teleport_material = TELEPORT;\nif (portal_teleport_light_u == 0) { teleport_material = gray_grid_M; }\nif (back) { teleport_material = back_material; }\nif (portal_mirror_u == 1) { teleport_material = mirror_M; }\n\nfloat radius = 2.0;\nfloat radius_sqr = sqr(radius);\nfloat radius_border_sqr = sqr(radius + portal_border_size_u);\nfloat pos1 = sqr(x*portal_ellipse_a_u) + sqr(y*portal_ellipse_b_u);\n\nif (pos1 < radius_border_sqr && x > 0.) {\n  if (pos1 > radius_sqr || x < portal_side_border_size_u) {\n    return back_material;\n  } else {\n    return teleport_material;\n  }\n} else {\n  return NOT_INSIDE;\n}"))),"monoportal"),(7):Named(Flat(kind:Simple(Some(((16)))),is_inside:(("if ((monoportal_b_mat_inv * pos).z > 0.) return NOT_INSIDE;\n\nreturn is_inside_triangle(x, y, 2.0, triangle_size_u, 0.02, triangle_white_M, triangle_black_M);"))),"triangle"),(8):Named(Flat(kind:Simple(Some(((17)))),is_inside:(("if ((monoportal_b_mat_inv * pos).z > 0.) return NOT_INSIDE;\n\nreturn is_inside_triangle(x, y, 2.0, triangle_size_u, 0.02, triangle_white_M, triangle_black_M);"))),"triangle_teleported")},storage_order:[(0),(1),(2),(3),(4),(5),(6),(7),(8)]),textures:(ids:(available:[],max:0),storage:{},storage_order:[]),materials:(ids:(available:[],max:12),storage:{(0):Named(Simple(color:(0.7647179,0.7024815,0.061205085),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_yellow"),(1):Named(Simple(color:(0.029196177,0.029196177,0.029196177),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_black"),(2):Named(Simple(color:(0.8458183,0.07454156,0.07454156),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_red"),(3):Named(Simple(color:(0.18068509,0.18068509,0.18068509),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_gray"),(4):Named(Simple(color:(0.116810285,0.26798066,0.9083436),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_blue"),(5):Named(Simple(color:(0.15478948,0.73873776,0.2186588),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_green"),(6):Named(Complex(code:(("MaterialProcessing result = material_simple(hit, r, vec3(0.6495146,0.2954198,0.03270938), 5e-1, false, 4e0, 3e-1);\nresult.mul_to_color *= (1.0 - portal_black_color_progress_u);\nreturn result;"))),"portal_orange"),(7):Named(Complex(code:(("MaterialProcessing result = material_simple(hit, r, vec3(0.04732297,0.560074,0.68341726), 5e-1, false, 4e0, 3e-1);\nresult.mul_to_color *= (1.0 - portal_black_color_progress_u);\nreturn result;"))),"portal_blue"),(8):Named(Reflect(add_to_color:(1,1,1)),"mirror"),(9):Named(Simple(color:(0.30276110768318176,0.30276110768318176,0.30276110768318176),normal_coef:0.5,grid:true,grid_scale:5,grid_coef:0.3),"gray_grid"),(10):Named(Simple(color:(0.04428127408027649,0.04428127408027649,0.04428127408027649),normal_coef:0.5,grid:false,grid_scale:4,grid_coef:0.3),"triangle_black"),(11):Named(Simple(color:(0.7699758410453796,0.7533574104309082,0.7533574104309082),normal_coef:0.5,grid:false,grid_scale:4,grid_coef:0.3),"triangle_white")},storage_order:[(0),(2),(1),(3),(4),(5),(6),(7),(8),(9),(10),(11)]),library:(ids:(available:[],max:2),storage:{(0):Named((("int is_inside_square(float x, float y, float sizex, float sizey, int material) {\n  if (abs(x) < sizex && abs(y) < sizey) {\n    return material;\n  } else {\n    return NOT_INSIDE;\n  }\n}\n")),"room"),(1):Named((("int is_inside_triangle(float x, float y, float angle, float width, float border, int inner_m, int border_m) {\n  float value = width - abs(x)*angle;\n  if (between(border, y, value - border * angle)) {\n    return inner_m;\n  } else if (between(0., y, value)) {\n    return border_m;\n  } else {\n    return NOT_INSIDE;\n  }\n}")),"triangle")},storage_order:[(0),(1)]),animations_filters:(uniforms:({((17)):true,((9)):false,((6)):true,((13)):true,((15)):false,((35)):false,((8)):true,((18)):true,((14)):false,((11)):false,((16)):false,((2)):false,((36)):false,((7)):true,((0)):false,((12)):true,((1)):false,((20)):true,((10)):false}),matrices:({((14)):false,((15)):false,((0)):false,((16)):false,((17)):false,((13)):true})),elements_descriptions:(uniforms:({((8)):(help_description:None,overrided_name:""),((6)):(help_description:Some((eng:"If this option is enabled, then light rays \ngoes through portals, not only objects.",rus:"Если эта опция включена, то через портал\nпроходят так же лучи света, а не только \nобъекты.")),overrided_name:"Teleport light"),((13)):(help_description:None,overrided_name:""),((12)):(help_description:None,overrided_name:""),((17)):(help_description:None,overrided_name:""),((20)):(help_description:None,overrided_name:"Progress"),((7)):(help_description:None,overrided_name:""),((18)):(help_description:None,overrided_name:"")}),matrices:({((13)):(help_description:None,overrided_name:"")})),user_uniforms:(uniforms:({((12)):false,((18)):false,((2)):false,((35)):false,((10)):false,((11)):false,((1)):false,((6)):true,((9)):false,((8)):false,((20)):false,((15)):false,((17)):false,((0)):false,((36)):false,((7)):false,((13)):false,((16)):false,((14)):false}),matrices:({((0)):false,((13)):false,((16)):false,((15)):false,((17)):false,((14)):false})),animation_stages:(ids:(available:[],max:4),storage:{(0):Named((name:(eng:"From doorway to portals",rus:"От дверного проёма к порталам"),description:Some((eng:"Create blue and orange portal from doorway in shape of half-ellipse. Next, we can use these portals to construct Monoportal.",rus:"Создаём синий и оранжевый порталы из дверного проёма в форме полу-эллипса. Далее эти два портала можно использовать чтобы сконструировать монопортал.")),uniforms:({((0)):FromDev,((14)):FromDev,((13)):FromDev,((36)):FromDev,((2)):FromDev,((11)):FromDev,((8)):FromDev,((12)):FromDev,((7)):Changed(Some(((24)))),((16)):FromDev,((10)):FromDev,((6)):FromDev,((35)):FromDev,((17)):Changed(Some(((21)))),((20)):ChangedAndToUser(Some(((22)))),((1)):FromDev,((18)):Changed(Some(((23)))),((9)):FromDev,((15)):FromDev}),matrices:({((17)):FromDev,((16)):FromDev,((15)):FromDev,((14)):FromDev,((13)):FromDev,((0)):FromDev})),"doorway to portal"),(1):Named((name:(eng:"Rotate blue portal",rus:"Вращаем голубой портал"),description:Some((eng:"Next we rotate the portal and put it in back. Pay attention that in tihs step we didn\'t do something extraordinary.",rus:"Далее вращаем портал и возвращаем его на место. Обратите внимание, что здесь не происходит ничего экстраординарного.")),uniforms:({((6)):FromDev,((2)):FromDev,((35)):FromDev,((7)):FromDev,((18)):Changed(Some(((27)))),((8)):FromDev,((15)):FromDev,((20)):ChangedAndToUser(Some(((28)))),((0)):FromDev,((13)):FromDev,((12)):FromDev,((17)):Changed(Some(((29)))),((14)):FromDev,((36)):FromDev,((10)):FromDev,((1)):FromDev,((11)):FromDev,((9)):FromDev,((16)):FromDev}),matrices:({((14)):FromDev,((15)):FromDev,((17)):FromDev,((13)):FromDev,((0)):FromDev,((16)):FromDev})),"rotate portal"),(2):Named((name:(eng:"Return back",rus:"Возвращаем обратно"),description:None,uniforms:({((7)):FromDev,((17)):Changed(Some(((30)))),((14)):FromDev,((20)):ChangedAndToUser(Some(((31)))),((6)):FromDev,((18)):FromDev,((0)):FromDev,((1)):FromDev,((8)):FromDev,((12)):FromDev,((13)):FromDev,((10)):FromDev,((35)):FromDev,((15)):FromDev,((16)):FromDev,((2)):FromDev,((11)):FromDev,((36)):FromDev,((9)):FromDev}),matrices:({((0)):FromDev,((17)):FromDev,((13)):FromDev,((14)):FromDev,((15)):FromDev,((16)):FromDev})),"return back"),(3):Named((name:(eng:"Remove inner borders",rus:"Убираем внутренние границы"),description:None,uniforms:({((18)):FromDev,((16)):FromDev,((7)):Changed(Some(((34)))),((10)):FromDev,((36)):FromDev,((13)):FromDev,((11)):FromDev,((35)):FromDev,((9)):FromDev,((17)):FromDev,((15)):FromDev,((20)):ChangedAndToUser(Some(((32)))),((14)):FromDev,((8)):FromDev,((2)):FromDev,((1)):FromDev,((6)):FromDev,((0)):FromDev,((12)):Changed(Some(((33))))}),matrices:({((0)):FromDev,((14)):FromDev,((15)):FromDev,((17)):FromDev,((13)):FromDev,((16)):FromDev})),"disable borders")},storage_order:[(0),(1),(2),(3)]),current_stage:Some(((3))),dev_stage:(uniforms:({((14)):Float((min:Some(-0.6),max:Some(0.6),value:-0.5)),((15)):Float((min:Some(-1.6),max:Some(1.6),value:0)),((20)):Progress(0),((6)):Bool(true),((35)):Float((min:None,max:None,value:0.2)),((0)):Float((min:Some(0),max:None,value:4)),((18)):Angle(3.141592653589793),((9)):Float((min:Some(0),max:None,value:0.13)),((1)):Float((min:Some(0),max:None,value:4)),((13)):Float((min:Some(0),max:None,value:0)),((11)):Float((min:Some(0),max:None,value:1)),((10)):Float((min:Some(0),max:None,value:2)),((8)):Bool(false),((7)):Progress(0),((2)):Float((min:Some(0),max:None,value:4)),((12)):Formula(("const_max_side_border")),((36)):Float((min:None,max:None,value:1.12)),((16)):Float((min:Some(-1),max:Some(1),value:-0.55)),((17)):Float((min:None,max:None,value:0))}),matrices:({((17)):Teleport(first_portal:Some(((14))),second_portal:Some(((15))),what:Some(((16)))),((15)):Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),((0)):Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),((13)):Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),((16)):Parametrized(offset:(x:Yes(Some(((14)))),y:Yes(Some(((15)))),z:Yes(Some(((16))))),rotate:(x:No(1.5707963267948966),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1)),((14)):Mul(to:Some(((19))),what:Some(((13))))})))