{"description_en":"# Monoportal.\n\nThis portal consists of one part. It looks like a mirror, but without mirroring! You can read a text through it, you can go through it!\n\n# Name\n\nI can call this «mono» because it has one continuous surface.\n\nI can call this «portal» because anything can go through it.\n\nI call anything a «monoportal» if it has one continuous surface and it is a portal. So, there are many of monoportals, but this is the simplest of flat monoportals.\n\n# How to construct\n\nIn stages below you can see how to construct this portal from primitive portals.\n\n# Explore\n\nAt this stage monoportal is fully constructed and you can move triangle and monoportal to see how things is teleported and how is looks like. Also, you can turn «mirror» option to see how basic mirror will look like.\n\n# True mirror\n\nIn real world exists such thing as «true mirror», and through it you will see exactly the same image, as in this monoportal. So, you can buy one, if you wism.","description_ru":"","cam":{"look_at":[0.0,0.0,0.0],"alpha":-1.9739995,"beta":1.0456507,"r":2.6296015},"uniforms":{"names":["room_size","room_size_minus","portal_ellipse_a","portal_ellipse_b","portal_side_border_size","portal_border_size","portal_offset","portal_rotate_progress","portal_rotate_angle","portal_black_color_progress","triangle_x","triangle_y","triangle_z","triangle_size","stage1","progress","stage2","stage3","stage4","stage5","stage6","mirror","portal_teleport_light"],"storage":[{"Float":{"min":0.0,"max":null,"value":3.0}},{"Formula":"-room_size"},{"Float":{"min":0.0,"max":null,"value":2.0}},{"Float":{"min":0.0,"max":null,"value":1.0}},{"Formula":"if(stage4, 1.0-progress, if(or(stage1, or(stage2, stage3)), 1.0, 0.0)) * portal_border_size"},{"Float":{"min":0.0,"max":null,"value":0.13}},{"Formula":"if(stage1, 0.0001 + progress, if(stage3, 1.0-progress, if(stage2, 1.0, 0.0))) * 0.6"},{"Formula":"if(stage2, progress, if(stage1, 0.0, 1.0))"},{"Formula":"-portal_rotate_progress * pi()"},{"Formula":"if(stage1, 1.0-progress, if(stage2, 0.0, if(stage3, 0.0, if(stage4, progress, 1.0))))"},{"Float":{"min":-0.6,"max":0.6,"value":-0.5}},{"Float":{"min":-1.6,"max":1.6,"value":0.0}},{"Float":{"min":-1.0,"max":1.0,"value":-1.0}},{"Formula":"if(stage5, progress, if(stage6, 1.0, 0.0)) * 0.7"},{"Bool":false},{"Float":{"min":0.0,"max":1.0,"value":0.0}},{"Bool":false},{"Bool":false},{"Bool":false},{"Bool":false},{"Bool":true},{"Bool":false},{"Bool":true}]},"matrices":{"names":["id","rz1","rz2","ry1","ry2","rx1","rx2","monoportal_a_1","monoportal_b_1","tri","tri_teleported","portal_0","monoportal_a","monoportal_b"],"storage":[{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}},{"Parametrized":{"offset":{"x":{"No":0.0},"y":{"No":0.0},"z":{"Yes":"room_size"}},"rotate":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"mirror":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"scale":{"No":1.0}}},{"Parametrized":{"offset":{"x":{"No":0.0},"y":{"No":0.0},"z":{"Yes":"room_size_minus"}},"rotate":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"mirror":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"scale":{"No":1.0}}},{"Parametrized":{"offset":{"x":{"No":0.0},"y":{"Yes":"room_size"},"z":{"No":0.0}},"rotate":{"x":{"No":1.5707964},"y":{"No":0.0},"z":{"No":0.0}},"mirror":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"scale":{"No":1.0}}},{"Parametrized":{"offset":{"x":{"No":0.0},"y":{"Yes":"room_size_minus"},"z":{"No":0.0}},"rotate":{"x":{"No":1.5707964},"y":{"No":0.0},"z":{"No":0.0}},"mirror":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"scale":{"No":1.0}}},{"Parametrized":{"offset":{"x":{"Yes":"room_size"},"y":{"No":0.0},"z":{"No":0.0}},"rotate":{"x":{"No":0.0},"y":{"No":1.5707964},"z":{"No":0.0}},"mirror":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"scale":{"No":1.0}}},{"Parametrized":{"offset":{"x":{"Yes":"room_size_minus"},"y":{"No":0.0},"z":{"No":0.0}},"rotate":{"x":{"No":0.0},"y":{"No":1.5707964},"z":{"No":0.0}},"mirror":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"scale":{"No":1.0}}},{"Parametrized":{"offset":{"x":{"No":0.0},"y":{"No":0.0},"z":{"Yes":"portal_offset"}},"rotate":{"x":{"No":0.0},"y":{"Yes":"portal_rotate_angle"},"z":{"No":0.0}},"mirror":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"scale":{"No":1.0}}},{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}},{"Parametrized":{"offset":{"x":{"Yes":"triangle_x"},"y":{"Yes":"triangle_y"},"z":{"Yes":"triangle_z"}},"rotate":{"x":{"No":1.5707964},"y":{"No":0.0},"z":{"No":0.0}},"mirror":{"x":{"No":0.0},"y":{"No":0.0},"z":{"No":0.0}},"scale":{"No":1.0}}},{"Teleport":{"first_portal":"monoportal_a","second_portal":"monoportal_b","what":"tri"}},{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}},{"Mul":{"to":"monoportal_a_1","what":"portal_0"}},{"Mul":{"to":"monoportal_b_1","what":"portal_0"}}]},"objects":{"names":["rz1","rz2","ry1","ry2","rx1","rx2","monoportal","triangle","triangle teleported"],"storage":[{"Flat":{"kind":{"Simple":"rz1"},"is_inside":"return is_inside_square(x, y, room_blue_M);"}},{"Flat":{"kind":{"Simple":"rz2"},"is_inside":"return is_inside_square(x, y, room_green_texture_M);"}},{"Flat":{"kind":{"Simple":"ry1"},"is_inside":"return is_inside_square(x, y, room_black_M);"}},{"Flat":{"kind":{"Simple":"ry2"},"is_inside":"return is_inside_square(x, y, room_gray_M);"}},{"Flat":{"kind":{"Simple":"rx1"},"is_inside":"return is_inside_square(x, y, room_yellow_M);"}},{"Flat":{"kind":{"Simple":"rx2"},"is_inside":"return is_inside_square(x, y, room_red_M);"}},{"Flat":{"kind":{"Portal":["monoportal_a","monoportal_b"]},"is_inside":"int back_material = portal_orange_M;\nif (first) { back_material = portal_blue_M; }\n\nint teleport_material = TELEPORT;\nif (portal_teleport_light_u == 0) { teleport_material = gray_grid_M; }\nif (back) { teleport_material = back_material; }\nif (mirror_u == 1) { teleport_material = mirror_M; }\n\nfloat radius = 2.0;\nfloat radius_sqr = sqr(radius);\nfloat radius_border_sqr = sqr(radius + portal_border_size_u);\nfloat pos1 = sqr(x*portal_ellipse_a_u) + sqr(y*portal_ellipse_b_u);\n\nif (pos1 < radius_border_sqr && x > 0.) {\n  if (pos1 > radius_sqr || x < portal_side_border_size_u) {\n    return back_material;\n  } else {\n    return teleport_material;\n  }\n} else {\n  return NOT_INSIDE;\n}"}},{"Flat":{"kind":{"Simple":"tri"},"is_inside":"if ((monoportal_b_mat_inv * pos).z > 0.) return NOT_INSIDE;\n\nreturn is_inside_triangle(x, y, 2.0, triangle_size_u, 0.02, triangle_white_M, triangle_black_M);"}},{"Flat":{"kind":{"Simple":"tri_teleported"},"is_inside":"if (mirror_u == 1) { return NOT_INSIDE; }\n\nif ((monoportal_a_mat_inv * pos).z < 0.) return NOT_INSIDE;\n\nreturn is_inside_triangle(x, y, 2.0, triangle_size_u, 0.02, triangle_white_M, triangle_black_M);"}}]},"textures":{"names":["monoportal"],"storage":["scenes/monoportal.png"]},"materials":{"names":["room_green","room_red","room_gray","room_black","portal_orange","portal_blue","room_blue","triangle_black","triangle_white","room_green_texture","mirror","room_yellow","gray_grid"],"storage":[{"Simple":{"color":[0.15478948,0.73873776,0.2186588],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Simple":{"color":[0.8458183,0.07454156,0.07454156],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Simple":{"color":[0.18068509,0.18068509,0.18068509],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Simple":{"color":[0.029196177,0.029196177,0.029196177],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Complex":{"code":"MaterialProcessing result = material_simple(hit, r, vec3(0.6495146,0.2954198,0.03270938), 5e-1, false, 4e0, 3e-1);\nresult.mul_to_color *= (1.0 - portal_black_color_progress_u);\nreturn result;"}},{"Complex":{"code":"MaterialProcessing result = material_simple(hit, r, vec3(0.04732297,0.560074,0.68341726), 5e-1, false, 4e0, 3e-1);\nresult.mul_to_color *= (1.0 - portal_black_color_progress_u);\nreturn result;"}},{"Simple":{"color":[0.116810285,0.26798066,0.9083436],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.2}},{"Simple":{"color":[0.015936032,0.015936032,0.015936032],"normal_coef":0.5,"grid":false,"grid_scale":4.0,"grid_coef":0.3}},{"Simple":{"color":[0.6259125,0.6259125,0.6259125],"normal_coef":0.5,"grid":false,"grid_scale":4.0,"grid_coef":0.3}},{"Complex":{"code":"MaterialProcessing result = material_simple(hit, r, vec3(0.15478948,0.73873776,0.2186588), 5e-1, true, 1.0, 3e-1);\nresult.mul_to_color *= texture2D(monoportal_tex, vec2(room_size_u + hit.u, room_size_u-hit.v) / (room_size_u * 2.0)).rgb;\nreturn result;"}},{"Reflect":{"add_to_color":[1.0,1.0,1.0]}},{"Simple":{"color":[0.7647179,0.7024815,0.061205085],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Simple":{"color":[0.29971308,0.29971308,0.29971308],"normal_coef":0.5,"grid":true,"grid_scale":5.0,"grid_coef":0.3}}]},"library":{"names":["room","triangle"],"storage":["int is_inside_square(float x, float y, int material) {\n  if (abs(x) < room_size_u && abs(y) < room_size_u) {\n    return material;\n  } else {\n    return NOT_INSIDE;\n  }\n}\n","int is_inside_triangle(float x, float y, float angle, float width, float border, int inner_m, int border_m) {\n  float value = width - abs(x)*angle;\n  if (between(border, y, value - border * angle)) {\n    return inner_m;\n  } else if (between(0., y, value)) {\n    return border_m;\n  } else {\n    return NOT_INSIDE;\n  }\n}"]},"user_uniforms":{"uniforms":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true],"matrices":[false,false,false,false,false,false,false,false,false,false,false,false,false,false]},"animation_stages":{"names":["From doorway to portals","Rotate portal","Return back","Disable borders","Show triangle","Explore"],"storage":[{"uniforms":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Bool":true}},{"ChangedAndToUser":{"Float":{"min":0.0,"max":1.0,"value":0.0}}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}}],"matrices":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}}},"Remains","Remains"]},{"uniforms":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Bool":false}},{"ChangedAndToUser":{"Float":{"min":0.0,"max":1.0,"value":0.0}}},{"Changed":{"Bool":true}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}}],"matrices":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}}},"Remains","Remains"]},{"uniforms":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Bool":false}},{"ChangedAndToUser":{"Float":{"min":0.0,"max":1.0,"value":0.0}}},{"Changed":{"Bool":false}},{"Changed":{"Bool":true}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}}],"matrices":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}}},"Remains","Remains"]},{"uniforms":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Bool":false}},{"ChangedAndToUser":{"Float":{"min":0.0,"max":1.0,"value":0.0}}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":true}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}}],"matrices":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}}},"Remains","Remains"]},{"uniforms":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Bool":false}},{"ChangedAndToUser":{"Float":{"min":0.0,"max":1.0,"value":0.0}}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":true}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}}],"matrices":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"Changed":{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}}},"Remains","Remains"]},{"uniforms":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","ProvidedToUser","ProvidedToUser","ProvidedToUser","Remains",{"Changed":{"Bool":false}},{"Changed":{"Float":{"min":0.0,"max":1.0,"value":0.0}}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":false}},{"Changed":{"Bool":true}},"ProvidedToUser"],"matrices":["Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains","Remains",{"ChangedAndToUser":{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}}},"Remains","Remains"]}]},"current_stage":5}