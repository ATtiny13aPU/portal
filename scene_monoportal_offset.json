{"description_en":"# Offsetting monoportal\n\nThis monoportal offsets input by half of its height. To save continuity, it need to be supported with two more portals.\n\nOnly offsetting by half-width and 0-width resulting in continuous portal, you can view that other types of offsetting is breaks portal and image.","description_ru":"","matrices":{"names":["id","a","b","p1","p2","p3","p4","p5","p6","tri","tri2","sph","b1","a2","b2"],"storage":[{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,1.0,0.0],"scale":1.0,"rotate":[0.0,3.1415927,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,0.0,4.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,0.0,-4.0],"scale":1.0,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,4.0,0.0],"scale":1.0,"rotate":[1.5707964,0.0,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,-4.0,0.0],"scale":1.0,"rotate":[1.5707964,0.0,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[4.0,0.0,0.0],"scale":1.0,"rotate":[0.0,1.5707964,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[-4.0,0.0,0.0],"scale":1.0,"rotate":[0.0,1.5707964,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.13,0.78,0.85],"scale":1.0,"rotate":[1.5707964,0.0,3.1415927],"mirror":[false,false,false]}},{"Teleport":{"first_portal":"b","second_portal":"a","what":"tri"}},{"Simple":{"offset":[-4.28,0.37,0.0],"scale":1.1,"rotate":[0.0,0.0,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,-1.0,0.0],"scale":1.0,"rotate":[0.0,3.1415927,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,0.0,0.0],"scale":1.0,"rotate":[4.712389,0.0,0.0],"mirror":[false,false,false]}},{"Simple":{"offset":[0.0,2.0,0.0],"scale":1.0,"rotate":[4.712389,0.0,0.0],"mirror":[false,false,false]}}]},"objects":{"names":["0","1","2","3","4","5","6","7","8","9","10"],"storage":[{"Flat":{"kind":{"Simple":"p1"},"is_inside":"return is_inside_square(x, y, green_M);"}},{"Flat":{"kind":{"Simple":"p2"},"is_inside":"return is_inside_square(x, y, red_M);"}},{"Flat":{"kind":{"Simple":"p3"},"is_inside":"return is_inside_square(x, y, black_M);"}},{"Flat":{"kind":{"Simple":"p4"},"is_inside":"return is_inside_square(x, y, gray_M);"}},{"Flat":{"kind":{"Simple":"p5"},"is_inside":"return is_inside_square(x, y, gray_M);"}},{"Flat":{"kind":{"Simple":"p6"},"is_inside":"return is_inside_square(x, y, black_M);"}},{"Flat":{"kind":{"Simple":"tri"},"is_inside":"if ((b_mat_inv * pos).z > 0.) return NOT_INSIDE;\n\nreturn is_inside_triangle(x, y, 2.0, 0.6, 0.05, black_solid_M, white_solid_M);"}},{"Flat":{"kind":{"Simple":"tri2"},"is_inside":"if ((a_mat_inv * pos).z < 0.) return NOT_INSIDE;\n\nreturn is_inside_triangle(x, y, 2.0, 0.6, 0.05, black_solid_M, white_solid_M);"}},{"Flat":{"kind":{"Portal":["a","b"]},"is_inside":"int material = blue_M;\nif (!first) {\n  material = orange_M;\n}\nfloat h = 1.;\nfloat border = 0.05;\n\nif (between(0., x, 0.5) && between(0., y, 2.-h)) {\n  if (back) {\n    return material;\n  } else {\n    return TELEPORT;\n  }\n} else if (between(0.5, x, 0.5 + border) && between(0., y, 2.-h)) {\n  return material;\n} else {\n  return NOT_INSIDE;\n}"}},{"Flat":{"kind":{"Portal":["a","b1"]},"is_inside":"int material = blue_M;\nif (!first) {\n  material = orange_M;\n}\nfloat h = 1.;\nfloat border = 0.05;\n\nif (between(0., x, 0.5) && between(2.-h, y, 2.)) {\n  if (back) {\n    return material;\n  } else {\n    return TELEPORT;\n  }\n} else if (between(0.5, x, 0.5 + border) && between(2.-h, y, 2.)) {\n  return material;\n} else {\n  return NOT_INSIDE;\n}"}},{"Flat":{"kind":{"Portal":["a2","b2"]},"is_inside":"int material = blue_M;\nif (!first) {\n  material = orange_M;\n}\nfloat border = 0.05;\n\nfloat pos1 = x*x + y*y;\nif (pos1 < 1.) {\n  if (back) {\n    return material;\n  } else {\n    return TELEPORT;\n  }\n} else if (pos1 < 1.2) {\n  return material;\n} else {\n  return NOT_INSIDE;\n}"}}]},"materials":{"names":["black","green","red","gray","black_solid","white_solid","blue","orange","sphere","green2"],"storage":[{"Simple":{"color":[0.054903064,0.054903064,0.054903064],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Simple":{"color":[0.30508098,0.73873776,0.20860045],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Simple":{"color":[0.5669161,0.037726384,0.037726384],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Simple":{"color":[0.3473362,0.3473362,0.3473362],"normal_coef":0.5,"grid":true,"grid_scale":1.0,"grid_coef":0.3}},{"Simple":{"color":[0.0,0.0,0.0],"normal_coef":0.5,"grid":false,"grid_scale":4.0,"grid_coef":0.3}},{"Simple":{"color":[0.7032436,0.7032436,0.7032436],"normal_coef":0.5,"grid":false,"grid_scale":4.0,"grid_coef":0.3}},{"Simple":{"color":[0.05806269,0.7189187,0.9494929],"normal_coef":0.5,"grid":false,"grid_scale":4.0,"grid_coef":0.3}},{"Simple":{"color":[0.8128055,0.19476937,0.04093266],"normal_coef":0.5,"grid":false,"grid_scale":4.0,"grid_coef":0.3}},{"Refract":{"refractive_index":1.5,"add_to_color":[1.0,1.0,1.0]}},{"Simple":{"color":[0.09210875,0.72849244,0.06813221],"normal_coef":0.5,"grid":true,"grid_scale":4.0,"grid_coef":0.3}}]},"library":{"names":["my library"],"storage":["int is_inside_square(float x, float y, int material) {\n  if (abs(x) < 4. && abs(y) < 4.) {\n    return material;\n  } else {\n    return NOT_INSIDE;\n  }\n}\n\nint is_inside_triangle(float x, float y, float angle, float width, float border, int inner_m, int border_m) {\n  float value = width - abs(x)*angle;\n  if (y > border && abs(y) < value) {\n    return inner_m;\n  } else if (y > 0. && abs(y) < value + border*angle) {\n    return border_m;\n  } else {\n    return NOT_INSIDE;\n  }\n}"]}}